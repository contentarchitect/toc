!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("@contentarchitect/editor")):"function"==typeof define&&define.amd?define(["@contentarchitect/editor"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).Toc=t(e.ContentArchitect)}(this,(function(e){"use strict";const t={props:{item:Object}};function n(e,t,n,r,i,o,l,s,c,d){"boolean"!=typeof l&&(c=s,s=l,l=!1);const a="function"==typeof n?n.options:n;let h;if(e&&e.render&&(a.render=e.render,a.staticRenderFns=e.staticRenderFns,a._compiled=!0,i&&(a.functional=!0)),r&&(a._scopeId=r),o?(h=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,c(e)),e&&e._registeredComponents&&e._registeredComponents.add(o)},a._ssrRegister=h):t&&(h=l?function(e){t.call(this,d(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,s(e))}),h)if(a.functional){const e=a.render;a.render=function(t,n){return h.call(n),e(t,n)}}else{const e=a.beforeCreate;a.beforeCreate=e?[].concat(e,h):[h]}return n}t.components={TreeItem:t};const r=t;var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",[n("a",{attrs:{href:"#"+e.item.anchorId},domProps:{innerHTML:e._s(e.item.content)}}),e._v(" "),e.item.children.length?n("ul",e._l(e.item.children,(function(e,t){return n("TreeItem",{key:t,attrs:{item:e}})})),1):e._e()])};i._withStripped=!0;function o(e){let t={level:0,parent:null,children:[]};const n=[];return e.forEach((e,r)=>{const i={...e,children:[],parent:null};n.push(i);let o=n[r-1];if(0==r)i.parent=t,t.children.push(i);else if(i.level<o.level){for(;o.parent&&o.parent.level>=i.level;)o=o.parent;i.parent=o.parent,o.parent.children.push(i)}else i.level>o.level?(i.parent=o,o.children.push(i)):i.level==o.level&&(i.parent=o.parent,i.parent.children.push(i))}),t}function l(e){if(Array.isArray(e))return`<ul>${e.map(e=>l(e)).join("")}</ul>`;var t=e.children.length?`<ul>${e.children.map(e=>l(e)).join("")}</ul>`:"";return`<li>\n\t\t\t<a href="#${e.anchorId}">${e.content}</a>\n\t\t\t${t}\n\t\t</li>`}const s={components:{TreeItem:n({render:i,staticRenderFns:[]},undefined,r,undefined,false,undefined,!1,void 0,void 0,void 0)},props:["value"],inject:["slottedBlocks"],data:()=>({tree:null}),watch:{slottedBlocks:{immediate:!0,deep:!0,handler(){const e=this.slottedBlocks.filter(e=>"Header"===e.constructor.name);this.tree=o(e)}}}};var c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",e._l(e.tree.children,(function(e){return n("TreeItem",{key:e.id,attrs:{item:e}})})),1)};c._withStripped=!0;const d=n({render:c,staticRenderFns:[]},undefined,s,undefined,false,undefined,!1,void 0,void 0,void 0);var a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",height:"24",width:"24"}},[t("path",{attrs:{d:"M3 9h14V7H3v2zm0 4h14v-2H3v2zm0 4h14v-2H3v2zm16 0h2v-2h-2v2zm0-10v2h2V7h-2zm0 6h2v-2h-2v2z"}}),t("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}})])}};class Toc extends e.Block{static get viewComponent(){return d}static get icon(){return a}static defaultData(){return{tree:null}}toHTML(e){return l(o(e.filter(e=>"Header"==e.constructor.name)).children)}static serializeFromHTML(e){return{}}}return Toc}));
